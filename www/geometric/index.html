<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="../shared/styles/base.css">
    <link rel="stylesheet" href="../shared/styles/components.css">
    <link rel="stylesheet" href="../shared/styles.css">
    <link rel="stylesheet" href="styles.css">
    <script src="../shared/theme.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="../index.html" class="back-link">‚Üê –ú–µ–Ω—é</a>
            <h1>üìä –ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è</h1>
            <div class="stats">
                <span class="score">‚úÖ <span id="correct">0</span></span>
                <span class="streak">üî• <span id="streak">0</span></span>
            </div>
        </div>

        <!-- Theory Section -->
        <div id="theory-section" class="section">
            <h2>üìö –¢–µ–æ—Ä—ñ—è</h2>

            <div class="theory-card">
                <h3>–©–æ —Ç–∞–∫–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è?</h3>
                <p>–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —á–∏—Å–µ–ª, –¥–µ <strong>–∫–æ–∂–µ–Ω —á–ª–µ–Ω –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –º–Ω–æ–∂–µ–Ω–Ω—è–º –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –Ω–∞ –æ–¥–Ω–µ –π —Ç–µ —Å–∞–º–µ —á–∏—Å–ª–æ</strong> (–∑–Ω–∞–º–µ–Ω–Ω–∏–∫).</p>
                <div class="example">
                    –ü—Ä–∏–∫–ª–∞–¥: 2, 6, 18, 54, ... (q = 3)
                </div>
            </div>

            <div class="theory-card">
                <h3>–ó–Ω–∞–º–µ–Ω–Ω–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—ñ—ó (q)</h3>
                <div class="formula">
                    q = b<sub>n+1</sub> / b<sub>n</sub>
                </div>
                <p>–í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ —á–ª–µ–Ω–∞ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ.</p>
                <div class="example">
                    –Ø–∫—â–æ b‚ÇÅ = 2, b‚ÇÇ = 6, —Ç–æ q = 6 / 2 = 3
                </div>
                <div class="warning">
                    ‚ö†Ô∏è q ‚â† 0, —ñ –≤—Å—ñ —á–ª–µ–Ω–∏ ‚â† 0
                </div>
            </div>

            <div class="theory-card">
                <h3>–§–æ—Ä–º—É–ª–∞ n-–≥–æ —á–ª–µ–Ω–∞</h3>
                <div class="formula">
                    b<sub>n</sub> = b<sub>1</sub> ¬∑ q<sup>n‚àí1</sup>
                </div>
                <p>–ó–Ω–∞—Ö–æ–¥–∏–º–æ –±—É–¥—å-—è–∫–∏–π —á–ª–µ–Ω, –∑–Ω–∞—é—á–∏ –ø–µ—Ä—à–∏–π —ñ –∑–Ω–∞–º–µ–Ω–Ω–∏–∫.</p>
                <div class="example">
                    b‚ÇÅ = 2, q = 3 ‚Üí b‚ÇÑ = 2 ¬∑ 3¬≥ = 2 ¬∑ 27 = 54
                </div>
            </div>

            <div class="theory-card">
                <h3>–°—É–º–∞ n –ø–µ—Ä—à–∏—Ö —á–ª–µ–Ω—ñ–≤</h3>
                <div class="formula">
                    S<sub>n</sub> = b<sub>1</sub> ¬∑ (q<sup>n</sup> ‚àí 1) / (q ‚àí 1)
                </div>
                <p>–Ø–∫—â–æ q ‚â† 1</p>
                <div class="example">
                    S‚ÇÑ –¥–ª—è 2, 6, 18, 54: S‚ÇÑ = 2¬∑(3‚Å¥‚àí1)/(3‚àí1) = 2¬∑80/2 = 80
                </div>
            </div>

            <div class="theory-card">
                <h3>–°–µ—Ä–µ–¥–Ω—î –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–µ</h3>
                <div class="formula">
                    b<sub>n</sub> = ‚àö(b<sub>n-1</sub> ¬∑ b<sub>n+1</sub>)
                </div>
                <p>–ö–æ–∂–µ–Ω —á–ª–µ–Ω ‚Äî —Å–µ—Ä–µ–¥–Ω—î –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–µ —Å—É—Å—ñ–¥–Ω—ñ—Ö (—è–∫—â–æ –≤—Å—ñ –¥–æ–¥–∞—Ç–Ω—ñ).</p>
                <div class="example">
                    –í –ø—Ä–æ–≥—Ä–µ—Å—ñ—ó 4, 12, 36: 12 = ‚àö(4 ¬∑ 36) = ‚àö144
                </div>
            </div>

            <button class="btn btn-primary" onclick="startPractice()">üéØ –ü–æ—á–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏–∫—É</button>
        </div>

        <!-- Topic Selection -->
        <div id="topic-section" class="section hidden">
            <h2>üéØ –û–±–µ—Ä—ñ—Ç—å —Ç–µ–º—É</h2>

            <div class="topic-grid">
                <button class="topic-btn" onclick="selectTopic('ratio')">
                    <span class="topic-icon">‚úñÔ∏è</span>
                    <span class="topic-name">–ó–Ω–∞–º–µ–Ω–Ω–∏–∫ q</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('nth_term')">
                    <span class="topic-icon">üî¢</span>
                    <span class="topic-name">n-–π —á–ª–µ–Ω</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('sum')">
                    <span class="topic-icon">‚ûï</span>
                    <span class="topic-name">–°—É–º–∞ S<sub>n</sub></span>
                </button>
                <button class="topic-btn" onclick="selectTopic('mean')">
                    <span class="topic-icon">‚àö</span>
                    <span class="topic-name">–°–µ—Ä–µ–¥–Ω—î –≥–µ–æ–º.</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('missing')">
                    <span class="topic-icon">‚ùì</span>
                    <span class="topic-name">–ü—Ä–æ–ø—É—â–µ–Ω–∏–π —á–ª–µ–Ω</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('mixed')">
                    <span class="topic-icon">üé≤</span>
                    <span class="topic-name">–ú—ñ–∫—Å</span>
                </button>
            </div>

            <button class="btn btn-secondary" onclick="showTheory()">üìö –î–æ —Ç–µ–æ—Ä—ñ—ó</button>
        </div>

        <!-- Practice Section -->
        <div id="practice-section" class="section hidden">
            <div class="level-indicator">
                <span id="topic-name">–¢–µ–º–∞</span>
                <span id="level-badge" class="level-badge">–†—ñ–≤–µ–Ω—å 1</span>
            </div>

            <div class="question-card">
                <div id="question-text" class="question-text"></div>
                <div id="sequence-display" class="sequence-display hidden"></div>
            </div>

            <div class="answer-section">
                <input type="text" id="answer-input" class="answer-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å" inputmode="text">
                <button class="btn btn-primary" onclick="checkAnswer()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
            </div>

            <div id="feedback" class="feedback hidden"></div>

            <div class="hint-section">
                <button class="btn btn-hint" onclick="showHint()">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>
                <button class="btn btn-hint" onclick="showFormula()">üìê –§–æ—Ä–º—É–ª–∞</button>
                <button class="btn btn-ai" onclick="getAIHelp()">ü§ñ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –®–Ü</button>
            </div>

            <div id="hint-box" class="hint-box hidden"></div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showTopics()">‚Üê –¢–µ–º–∏</button>
                <button class="btn btn-secondary" onclick="nextQuestion()">–î–∞–ª—ñ ‚Üí</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="section hidden">
            <h2>üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏</h2>
            <div class="results-card">
                <div class="result-item">
                    <span>–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö:</span>
                    <span id="final-correct">0</span>
                </div>
                <div class="result-item">
                    <span>–ù–∞–π–∫—Ä–∞—â–∞ —Å–µ—Ä—ñ—è:</span>
                    <span id="final-streak">0</span>
                </div>
                <div class="result-item">
                    <span>–†—ñ–≤–µ–Ω—å:</span>
                    <span id="final-level">1</span>
                </div>
            </div>
            <button class="btn btn-primary" onclick="showTopics()">üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
            <button class="btn btn-secondary" onclick="showTheory()">üìö –î–æ —Ç–µ–æ—Ä—ñ—ó</button>
        </div>
    </div>

    <script src="../shared/ai-hints.js"></script>
    <script src="app.js"></script>
    <script src="../shared/firebase.js"></script>
</body>
</html>
