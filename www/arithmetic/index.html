<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="../shared/styles.css">
    <link rel="stylesheet" href="styles.css">
    <script src="../shared/theme.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <a href="../index.html" class="back-link">‚Üê –ú–µ–Ω—é</a>
            <h1>üìê –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è</h1>
            <div class="stats">
                <span class="score">‚úÖ <span id="correct">0</span></span>
                <span class="streak">üî• <span id="streak">0</span></span>
            </div>
        </div>

        <!-- Theory Section -->
        <div id="theory-section" class="section">
            <h2>üìö –¢–µ–æ—Ä—ñ—è</h2>

            <div class="theory-card">
                <h3>–©–æ —Ç–∞–∫–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—ñ—è?</h3>
                <p>–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —á–∏—Å–µ–ª, –¥–µ <strong>—Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ —Å—É—Å—ñ–¥–Ω—ñ–º–∏ —á–ª–µ–Ω–∞–º–∏ –æ–¥–Ω–∞–∫–æ–≤–∞</strong>.</p>
                <div class="example">
                    –ü—Ä–∏–∫–ª–∞–¥: 2, 5, 8, 11, 14, ... (d = 3)
                </div>
            </div>

            <div class="theory-card">
                <h3>–†—ñ–∑–Ω–∏—Ü—è –ø—Ä–æ–≥—Ä–µ—Å—ñ—ó (d)</h3>
                <div class="formula">
                    d = a<sub>n+1</sub> ‚àí a<sub>n</sub>
                </div>
                <p>–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –±—É–¥—å-—è–∫–∏–º —á–ª–µ–Ω–æ–º —ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º.</p>
                <div class="example">
                    –Ø–∫—â–æ a‚ÇÅ = 3, a‚ÇÇ = 7, —Ç–æ d = 7 ‚àí 3 = 4
                </div>
            </div>

            <div class="theory-card">
                <h3>–§–æ—Ä–º—É–ª–∞ n-–≥–æ —á–ª–µ–Ω–∞</h3>
                <div class="formula">
                    a<sub>n</sub> = a<sub>1</sub> + (n ‚àí 1) ¬∑ d
                </div>
                <p>–ó–Ω–∞—Ö–æ–¥–∏–º–æ –±—É–¥—å-—è–∫–∏–π —á–ª–µ–Ω, –∑–Ω–∞—é—á–∏ –ø–µ—Ä—à–∏–π —ñ —Ä—ñ–∑–Ω–∏—Ü—é.</p>
                <div class="example">
                    a‚ÇÅ = 2, d = 3 ‚Üí a‚ÇÖ = 2 + (5‚àí1)¬∑3 = 2 + 12 = 14
                </div>
            </div>

            <div class="theory-card">
                <h3>–°—É–º–∞ n –ø–µ—Ä—à–∏—Ö —á–ª–µ–Ω—ñ–≤</h3>
                <div class="formula">
                    S<sub>n</sub> = (a<sub>1</sub> + a<sub>n</sub>) ¬∑ n / 2
                </div>
                <p>–∞–±–æ</p>
                <div class="formula">
                    S<sub>n</sub> = (2a<sub>1</sub> + (n‚àí1)¬∑d) ¬∑ n / 2
                </div>
                <div class="example">
                    S‚ÇÖ –¥–ª—è 2, 5, 8, 11, 14: S‚ÇÖ = (2+14)¬∑5/2 = 40
                </div>
            </div>

            <div class="theory-card">
                <h3>–°–µ—Ä–µ–¥–Ω—î –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ</h3>
                <div class="formula">
                    a<sub>n</sub> = (a<sub>n-1</sub> + a<sub>n+1</sub>) / 2
                </div>
                <p>–ö–æ–∂–µ–Ω —á–ª–µ–Ω (–∫—Ä—ñ–º –∫—Ä–∞–π–Ω—ñ—Ö) ‚Äî —Å–µ—Ä–µ–¥–Ω—î –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–µ —Å—É—Å—ñ–¥–Ω—ñ—Ö.</p>
                <div class="example">
                    –í –ø—Ä–æ–≥—Ä–µ—Å—ñ—ó 3, 7, 11: 7 = (3 + 11) / 2
                </div>
            </div>

            <button class="btn btn-primary" onclick="startPractice()">üéØ –ü–æ—á–∞—Ç–∏ –ø—Ä–∞–∫—Ç–∏–∫—É</button>
        </div>

        <!-- Topic Selection -->
        <div id="topic-section" class="section hidden">
            <h2>üéØ –û–±–µ—Ä—ñ—Ç—å —Ç–µ–º—É</h2>

            <div class="topic-grid">
                <button class="topic-btn" onclick="selectTopic('difference')">
                    <span class="topic-icon">üìè</span>
                    <span class="topic-name">–†—ñ–∑–Ω–∏—Ü—è d</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('nth_term')">
                    <span class="topic-icon">üî¢</span>
                    <span class="topic-name">n-–π —á–ª–µ–Ω</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('sum')">
                    <span class="topic-icon">‚ûï</span>
                    <span class="topic-name">–°—É–º–∞ S<sub>n</sub></span>
                </button>
                <button class="topic-btn" onclick="selectTopic('mean')">
                    <span class="topic-icon">‚öñÔ∏è</span>
                    <span class="topic-name">–°–µ—Ä–µ–¥–Ω—î</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('missing')">
                    <span class="topic-icon">‚ùì</span>
                    <span class="topic-name">–ü—Ä–æ–ø—É—â–µ–Ω–∏–π —á–ª–µ–Ω</span>
                </button>
                <button class="topic-btn" onclick="selectTopic('mixed')">
                    <span class="topic-icon">üé≤</span>
                    <span class="topic-name">–ú—ñ–∫—Å</span>
                </button>
            </div>

            <button class="btn btn-secondary" onclick="showTheory()">üìö –î–æ —Ç–µ–æ—Ä—ñ—ó</button>
        </div>

        <!-- Practice Section -->
        <div id="practice-section" class="section hidden">
            <div class="level-indicator">
                <span id="topic-name">–¢–µ–º–∞</span>
                <span id="level-badge" class="level-badge">–†—ñ–≤–µ–Ω—å 1</span>
            </div>

            <div class="question-card">
                <div id="question-text" class="question-text"></div>
                <div id="sequence-display" class="sequence-display hidden"></div>
            </div>

            <div class="answer-section">
                <input type="text" id="answer-input" class="answer-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å" inputmode="text">
                <button class="btn btn-primary" onclick="checkAnswer()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
            </div>

            <div id="feedback" class="feedback hidden"></div>

            <div class="hint-section">
                <button class="btn btn-hint" onclick="showHint()">üí° –ü—ñ–¥–∫–∞–∑–∫–∞</button>
                <button class="btn btn-hint" onclick="showFormula()">üìê –§–æ—Ä–º—É–ª–∞</button>
                <button class="btn btn-ai" onclick="getAIHelp()">ü§ñ –ü–æ—è—Å–Ω–µ–Ω–Ω—è –®–Ü</button>
            </div>

            <div id="hint-box" class="hint-box hidden"></div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showTopics()">‚Üê –¢–µ–º–∏</button>
                <button class="btn btn-secondary" onclick="nextQuestion()">–î–∞–ª—ñ ‚Üí</button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results-section" class="section hidden">
            <h2>üèÜ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏</h2>
            <div class="results-card">
                <div class="result-item">
                    <span>–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö:</span>
                    <span id="final-correct">0</span>
                </div>
                <div class="result-item">
                    <span>–ù–∞–π–∫—Ä–∞—â–∞ —Å–µ—Ä—ñ—è:</span>
                    <span id="final-streak">0</span>
                </div>
                <div class="result-item">
                    <span>–†—ñ–≤–µ–Ω—å:</span>
                    <span id="final-level">1</span>
                </div>
            </div>
            <button class="btn btn-primary" onclick="showTopics()">üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
            <button class="btn btn-secondary" onclick="showTheory()">üìö –î–æ —Ç–µ–æ—Ä—ñ—ó</button>
        </div>
    </div>

    <script src="../shared/ai-hints.js"></script>
    <script src="app.js"></script>
</body>
</html>
